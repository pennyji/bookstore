<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- namespace必须指向dao接口 -->
<mapper namespace="com.cheer.mini.bms.dao.BookDao">
	<sql id="hotbook">bookid,bookname,pictureUrl,summary</sql>
	<sql id="newbook">bookid,bookname,pictureUrl,summary</sql>
	<sql id="discount">bookid,bookname,pictureUrl,summary</sql>
	<sql id="author">bookid,bookname,pictureUrl,summary</sql>
	
	<select id="getHotBooks"  resultType="Book">
		select <include refid="hotbook" /> from book where hot = 1
	</select>
<<<<<<< HEAD
	<select id="findLatestBook" resultType="Book">
		SELECT <include refid="hotbook" /> from book ORDER BY createDate DESC limit 3
	</select>
	<select id="findDiscountBook" resultType="Book">
		SELECT * from book WHERE discount != ''
	</select>
	
	<select id="findById" parameterType="String" resultType="Book">
		SELECT * from book WHERE bookid= #{bookid} 
	</select>
	
	<select id="findByAuthor" parameterType="String" resultType="Book">
		SELECT <include refid="hotbook" /> from book  where author = #{author}
	</select>
=======
	<!-- 查找新书，更加数据库creatDate字段降序，只去前两项 -->
	<select id="getNewBooks" resultType="Book">
	    select <include refid="newbook"></include>from book ORDER BY createDate DESC LIMIT 2
	</select>
	
	<!-- 查找有折扣的书 -->
	<select id="getDiscount" resultType="Book">
	    select <include refid="discount"></include> from book WHERE discount != ''
	</select>
	
	<!-- 查找单个书籍详情 -->
    <select id="findById" parameterType="String" resultType="Book">
        select * from book where bookid = #{bookid}
    </select>
    
    <!-- 根据Author查找书籍 -->
    <select id="findByAuthor" parameterType="String" resultType="Book">
        select <include refid="author"></include> from book where author = #{author}
    </select>
>>>>>>> Evian
	
</mapper> 
